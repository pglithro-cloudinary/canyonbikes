(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{175:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a(2),r=a.n(i);function s(e){e&&e.apply(this)}var o=function(){var e=r()((function*(e,t,a,i){void 0===i&&(i=0);var l=document.body,n=l.querySelector('script[src="'+e+'"]');return new Promise((c,d)=>{if(n)try{s(t),c()}catch(p){var u=i+1;u<10&&setTimeout(r()((function*(){yield o(e,t,u)})),400),u>=10&&(s(a),d())}else{var h=document.createElement("script");h.src=e,h.type="text/javascript",h.readyState?h.onreadystatechange=()=>{"loaded"!==h.readyState&&"complete"!==h.readyState||(h.onreadystatechange=null,s(t),c())}:(h.onload=()=>{s(t),c()},h.onerror=()=>{s(a),d()}),l.appendChild(h)}})}));return function(t,a,i,r){return e.apply(this,arguments)}}(),l=o},249:function(e,t,a){var i=a(38);e.exports=function(){var e=new i.Template({code:function(e,t,a){var i=this;return i.b(a=a||""),i.b('<div class="heroCallCenter__callCenterDataListWrapperInner"><ul class="contentBulletPoints__list contentBulletPoints__list--number heroCallCenter__callCenterDataList"> '),i.s(i.f("variations",e,t,1),e,t,0,183,567,"{{ }}")&&(i.rs(e,t,(function(e,t,a){a.b(' <li class="contentBulletPoints__listItem contentBulletPoints__listItem--number heroCallCenter__callCenterDataListItem"><div class="contentBulletPoints__itemContent heroCallCenter__itemContent"> '),a.s(a.f("attributes",e,t,1),e,t,0,393,465,"{{ }}")&&(a.rs(e,t,(function(e,t,a){a.b('<div class="heroCallCenter__callCenterDataListItemAttribute">'),a.b(a.v(a.d(".",e,t,0))),a.b("</div>")})),e.pop()),a.b(' <div class="heroCallCenter__callCenterDataListItemIdentifier">'),a.b(a.v(a.f("id",e,t,0))),a.b("</div></div></li> ")})),e.pop()),i.b(" </ul> "),i.s(i.f("salesKmatId",e,t,1),e,t,0,605,680,"{{ }}")&&(i.rs(e,t,(function(e,t,a){a.b(' <div class="heroCallCenter__kmat-id">Sales KMAT ID: '),a.b(a.v(a.f("salesKmatId",e,t,0))),a.b("</div> ")})),e.pop()),i.b(" </div>"),i.fl()},partials:{},subs:{}},'<div class="heroCallCenter__callCenterDataListWrapperInner"><ul class="contentBulletPoints__list contentBulletPoints__list--number heroCallCenter__callCenterDataList"> {{#variations}} <li class="contentBulletPoints__listItem contentBulletPoints__listItem--number heroCallCenter__callCenterDataListItem"><div class="contentBulletPoints__itemContent heroCallCenter__itemContent"> {{#attributes}}<div class="heroCallCenter__callCenterDataListItemAttribute">{{.}}</div>{{/attributes}} <div class="heroCallCenter__callCenterDataListItemIdentifier">{{id}}</div></div></li> {{/variations}} </ul> {{#salesKmatId}} <div class="heroCallCenter__kmat-id">Sales KMAT ID: {{salesKmatId}}</div> {{/salesKmatId}} </div>',i);return e.render.apply(e,arguments)}},352:function(e,t,a){"use strict";a.r(t);var i=a(11),r=a(4),s=a(9),o=s.a.extend({events:{"mouseover .js-teamNameWrapper":"toggleTeamNameData"},initialize(){this.factoryTeams=Array.from(this.el.querySelectorAll(".js-teamNameWrapper")),this.factoryImages=Array.from(this.el.querySelectorAll(".js-teamImageContainer"))},clearActiveTeamNamesData(){this.factoryTeams.forEach(e=>e.classList.remove("is-active")),this.factoryImages.forEach(e=>e.classList.remove("is-active"))},toggleTeamNameData(e){var t,{delegateTarget:a}=e;a.classList.contains("is-active")||(this.clearActiveTeamNamesData(),a.classList.add("is-active"),t=a.querySelector("button").getAttribute("id").split("-").pop(),this.el.querySelector("#factory-tab-panel-"+t).classList.add("is-active"))}}),l=a(12),n=a.n(l),c=a(248),d=a.n(c),u=a(2),h=a.n(u),p=a(0),m=a(3),y=a(175),g=a(1),v=a(8),b=a(27),f=a(5),j=a(15),S=a(89),O=a(64),P=a.n(O);function C(){return(C=h()((function*(){"construyeCalculadoraModelo2"in window?yield window.construyeCalculadoraModelo2(P.a):"construyeCalculadora"in window&&(yield window.construyeCalculadora(P.a))}))).apply(this,arguments)}var M=Object(f.b)(function(){var e=h()((function*(e,t){e.childElementCount<2&&(window.codCentro=t.vendorId,window.cantidad=t.amount,window.server=t.scriptBaseUrl,window.bloquearImporte=!0,window.codPromocion=t.promoId||null,yield Object(y.a)(t.scriptUrl))}));return function(t,a){return e.apply(this,arguments)}}()),w=a(6),D=a(30);function q(e,t){Object(D.a)(!0);try{var a=e.dataset.oneyConfig?JSON.parse(e.dataset.oneyConfig):null,i=e.dataset.amount;if(a){var r=function(e,t,a){var i=e.installments,r={country:e.country,language:e.language,merchant_guid:e.merchantGuid,merchant_name:e.merchantName,merchant_orias_number:e.merchantOriasNumber,merchant_address:e.merchantAddress,payment_amount:t,showAsModal:!1,responseType:"html"};Object.keys(i).forEach(e=>{var t=i[e];e===a&&(r.document_type=t.docType,r.free_bts=!0===t.isInterestFree)});var s=Object(w.d)("oneyConditionsModal")||new w.c({el:document.querySelector(".js-oneyConditionsModal")});return r.successCallback=function(t,i){s.setHeadline(e.resources.headlineModalConditions+" "+a+"x"),s.setModalContent(i.html),s.open()},r.errorCallback=function(t,i){s.setHeadline(e.resources.headlineModalConditions+" "+a+"x"),s.setModalContent(i),s.open()},r}(a,i,t);Object(y.a)(a.externalScriptUrl,h()((function*(){window.loadOneyWidget(h()((function*(){window.oneyMerchantApp.loadGeneralConditions({options:r})})))})))}}catch(s){console.log(s)}finally{setTimeout(h()((function*(){Object(D.b)()})),1e3)}}function A(e){var t=e.dataset.oneyConfig?JSON.parse(e.dataset.oneyConfig):null,a=e.dataset.amount;if(t){var i=function(e,t){var a=e.availableInstallments,i={country:e.country,language:e.language,merchant_guid:e.merchantGuid,merchant_name:e.merchantName,merchant_orias_number:e.merchantOriasNumber,merchant_address:e.merchantAddress,payment_amount:t,filter_by:"filters",filters:[]};return Object.keys(a).forEach(e=>{var t=a[e];i.filters.push({payment_mode:t.paymentMode,is_free:t.isInterestFree})}),i}(t,a);Object(y.a)(t.externalScriptUrl,()=>{window.loadOneyWidget(()=>{window.oneyMerchantApp.loadSimulationPopin({options:i})})})}}var L=a(10);function k(e){return T.apply(this,arguments)}function T(){return(T=h()((function*(e){var t=e.querySelector(".js-financing-rate"),a=t?t.options[t.selectedIndex].value:null;if(a){var i=a.split(":"),r=i.length>2?i[2]:null;if(r){var s=e.querySelector(".js-interest-rate");s&&(s.innerHTML=r)}}}))).apply(this,arguments)}function I(e){return x.apply(this,arguments)}function x(){return(x=h()((function*(e){var t=e.querySelector(".js-financing-rate"),a=e.querySelector(".js-month-rate"),i=t.options[t.selectedIndex].value.split(":")[1],s=e.querySelector(".js-financing-value"),o=new FormData,{currency:l,locale:n}=s.dataset,c=s.dataset.price;"true"===s.dataset.changedValue&&s.checkValidity()&&(c=s.value),o.append("currency",l),o.append("locale",n),o.append("price",c*parseFloat(i));var d=yield fetch(r.a.urlFormatMoney,Object(m.e)(o)),u=yield d.json();a.innerHTML=u.priceFormatted}))).apply(this,arguments)}var z=w.c.extend({mixins:[{events:{"change .js-financing-value":"changeRate","focusin .js-financing-value":"clearAmount","change .js-financing-rate":"changeRate"},onOpen(){var e=this;return h()((function*(){var{el:t}=e,a=t.querySelector(".js-financing-value");a&&"true"===a.dataset.changedValue&&(a.removeAttribute("pattern"),a.dataset.changedValue="false",yield a.form.reset(),yield Object(L.a)(a),yield I(t)),yield k(t)}))()}}],changeRate(){var e=this;return h()((function*(){var{el:t}=e;yield I(t),yield k(t)}))()},clearAmount(){var{el:e}=this,t=e.querySelector(".js-financing-value");t.value="",t.dataset.changedValue="true",t.setAttribute("pattern","^\\d+$")}});function E(e){return H.apply(this,arguments)}function H(){return(H=h()((function*(e){var t=e.querySelector(".js-installments-rate"),a=e.querySelector(".js-installments-month-rate"),i=t.options[t.selectedIndex].value,s=e.querySelector(".js-installments-value"),o=new FormData,{currency:l,locale:n}=s.dataset,c=s.dataset.price;"true"===s.dataset.changedValue&&s.checkValidity()&&(c=s.value),o.append("currency",l),o.append("locale",n),o.append("price",c/i);var d=yield fetch(r.a.urlFormatMoney,Object(m.e)(o)),u=yield d.json();a.innerHTML=u.priceFormatted}))).apply(this,arguments)}var _,R=w.c.extend({mixins:[{events:{"change .js-installments-value":"changeMonthlyRate","focusin .js-installments-value":"clearAmount","change .js-installments-rate":"changeMonthlyRate"},onOpen(){var e=this;return h()((function*(){var{el:t}=e,a=t.querySelector(".js-installments-value");"true"===a.dataset.changedValue&&(a.removeAttribute("pattern"),a.dataset.changedValue="false",yield a.form.reset(),yield Object(L.a)(a),yield E(t))}))()}}],changeMonthlyRate(){var e=this;return h()((function*(){var{el:t}=e;yield E(t)}))()},clearAmount(){var{el:e}=this,t=e.querySelector(".js-installments-value");t.value="",t.dataset.changedValue="true",t.setAttribute("pattern","^\\d+$")}}),B=w.c.extend({mixins:{initialize(){var e=this.el.querySelector(".deliveryAddressForm");this.form=e,this.initialMarkup=e&&e.outerHTML},onOpen(){var{form:e,initialMarkup:t}=this,a=Object(p.o)(t);e.innerHTML="",a.length&&a[0].hasChildNodes()&&Array.from(a[0].children).forEach(t=>{e.appendChild(t)})}}}),V=a(17),U=a(153),G=a(145),F=(e,t,a)=>{var i=(e.querySelector("g")||e).childNodes,r=a?3:1;i.forEach(e=>{e.tagName&&("polygon"!==e.tagName?e.setAttribute("style","stroke:"+t+"; stroke-width: "+r):e.setAttribute("style"," fill:"+t+"; stroke:"+t+"; stroke-width: "+r))})},N=e=>e.classList.contains("geometrySelected")||e.classList.contains("geometryHovered"),W={events:{"click .geometryTable__section .js-sizeButton":"onSizeButtonClick"},initializeGeometryMixin(){var{el:e}=this;this.geometryTableRows=e.querySelectorAll(".js-geometryTable__dataRow"),this.geometrySizeButtons=Array.from(e.querySelectorAll(".js-sizeButton"))},initGeometrySVGImage(){var e,t=this.el.querySelector("#geometrySvgImage");if(t){if(e=t.data){var a=this.el.querySelector(".js-geometry-image-wrapper");t.addEventListener("load",()=>{var e,i,r,s,o=this.el.querySelector(".js-geometry-loader");o&&o.remove(),Object(p.b)(a,"detailedGeometry__imageColInner",!0),Object(p.b)(a,"detailedGeometry__imageColInnerLoader",!1),Object(p.b)(t,"detailedGeometry__img--hidden",!1),this.geometrySvgDoc=t.contentDocument,i=(e=this).geometrySvgDoc?e.geometrySvgDoc.querySelector("svg"):null,r=i?e.el.querySelector(".js-geometryImgSvg"):null,(s=r?r.dataset.alternativeText:null)&&(i.setAttribute("role","image"),i.setAttribute("aria-label",s),i.insertAdjacentHTML("afterbegin","<title>"+s+"</title>")),this.initGeometryTableEventListeners()},!1)}t.data=e}},initGeometryTableEventListeners(){var e=this.el.querySelectorAll(".js-geometryTable__dataRow[data-letter]");if(e){var t=[];e.forEach(e=>t.push(e)),Object(U.a)(...t.map(e=>Object(G.a)(e,"mouseenter")),...t.map(e=>Object(G.a)(e,"mouseleave")),...t.map(e=>Object(G.a)(e,"click"))).subscribe(e=>{var{target:t,type:a}=e;return this.updateGeometrySelection(t,a)})}},updateGeometrySelection(e,t){var a=e,i=e.dataset.letter;if(!i){var r=e.closest(".js-geometryTable__dataRow[data-letter]");r&&(i=r.dataset.letter,a=r)}if(i&&this.geometrySvgDoc){var s,o=".geo-"+i,l=this.geometrySvgDoc.querySelectorAll(o);if(l.length)l.forEach(e=>{"mouseenter"===t&&(Object(p.b)(e,"geometryHovered",!e.classList.contains("geometrySelected")),s=N(e)?"#e76000":"#000",F(e,s,N(e))),"mouseleave"===t&&(Object(p.p)(e,"geometryHovered"),s=N(e)?"#e76000":"#000",F(e,s,N(e))),"click"===t&&(Object(p.b)(e,"geometrySelected",!e.classList.contains("geometrySelected")),Object(p.b)(a,"geometrySelected",!a.classList.contains("geometrySelected")),Object(p.p)(e,"geometryHovered"),Object(p.p)(a,"geometryHovered"),s=N(e)?"#e76000":"#000",F(e,s,N(e)),a.closest(".detailedGeometry__accordion").querySelectorAll(".geometrySelected").forEach(e=>{e.dataset.letter!==i&&Object(p.p)(e,"geometrySelected")}),this.geometrySvgDoc.querySelectorAll(".geometrySelected").forEach(e=>{e.classList.contains("geo-"+i)||(Object(p.p)(e,"geometrySelected"),F(e,"#000",!1))}))})}},updateGeometryTableHeadings(e){this.el.querySelectorAll(".js-sizeButtonContainer").forEach(t=>{var a=t.querySelector(".js-sizeButton"),i=t.dataset.productSize===e;Object(p.b)(a,"is-active",i),Object(p.b)(a,"is-selected",i)})},onSizeButtonClick(e){this.chooseGeometrySize(e),this.toggleActiveSize(e)},chooseGeometrySize(e){var t,a=e.delegateTarget.dataset.size;a&&(t=this.el.querySelectorAll('.js-sizeButton[data-size="'+a+'"]')),this.chooseGeometrySizeIdx(t,a),e.preventDefault()},chooseGeometrySizeIdx(e,t){((e,t)=>{e.map(e=>Array.from(this.el.querySelectorAll("."+e))).reduce((e,t)=>(e.push(...t),e)).forEach(e=>{e.classList.remove(t)})})(["js-sizeButton","js-sizeDataContainer"],"is-active"),e&&e.forEach(e=>e.classList.add("is-active")),this.geometryTableRows.forEach(e=>{var a=e.querySelectorAll(".js-sizeDataContainer");a.forEach(e=>{e.setAttribute("aria-hidden","true")});var i=a[this.findOriginalSizeButtonIndex(t)];i.classList.add("is-active"),i.setAttribute("aria-hidden","false")})},findOriginalSizeButtonIndex(e){var t,a=this.el.querySelector('.js-sizeButton[data-size="'+e+'"]');return a&&(t=this.geometrySizeButtons.findIndex(e=>e===a)),t},updateGeometryUI(){var{el:e}=this,t=e.querySelectorAll(".js-clickableSizes"),a=e.querySelector(".js-clickableSizes"),i=a?a.querySelectorAll(".js-sizeButton"):null,r=e.querySelectorAll(".js-tableSizeHeadings"),s=e.querySelectorAll(".js-geometryTable__dataRow .js-sizeDataContainer"),o=!1;if(Object(V.d)(["sm"])){if(t&&t.length&&(t.forEach(e=>e.classList.remove("is-hidden")),t.forEach(e=>e.setAttribute("aria-hidden","false"))),r&&r.length&&(r.forEach(e=>e.classList.add("is-hidden")),r.forEach(e=>e.setAttribute("aria-hidden","true"))),s.forEach(e=>{e.classList.contains("is-active")?o=!0:e.setAttribute("aria-hidden","true")}),!o&&i&&i.length){var l=i[Math.floor(i.length/2)];l&&l.click()}}else t&&t.length&&(t.forEach(e=>e.classList.add("is-hidden")),t.forEach(e=>e.setAttribute("aria-hidden","true"))),r&&r.length&&(r.forEach(e=>e.classList.remove("is-hidden")),r.forEach(e=>e.setAttribute("aria-hidden","false"))),s.forEach(e=>{e.setAttribute("aria-hidden","false")})},geometryVariationSelection(e){try{var t=this.el.querySelector('.js-sizeButton[data-size="'+e+'"]');t&&t.click()}catch(a){}},toggleActiveSize(e){var{delegateTarget:t}=e;t.classList.contains("is-active")||(this.el.querySelectorAll(".js-sizeButton").forEach(e=>e.classList.remove("is-active")),t.classList.toggle("is-active"))}},J=w.c.extend({mixins:[W,{initialize(){g.Gb.take(g.mb,e=>{var{productData:t}=e;this.updateGeometryTableHeadings(t.selectedSizeVariationValue),this.geometryVariationSelection(t.selectedSizeVariationValue)}),V.a.subscribe(()=>{this.updateGeometryUI()})},onOpen(){var e=this;return h()((function*(){e.initializeGeometryMixin(),e.updateGeometryUI(),e.initGeometrySVGImage(),e.selectedSizeVariationValue&&(e.geometryVariationSelection(e.selectedSizeVariationValue),e.updateGeometryTableHeadings(e.selectedSizeVariationValue))}))()},setSelectedSizeVariation(e){this.selectedSizeVariationValue=e||this.selectedSizeVariationValue||""}}]}),K=()=>{Object(p.b)(_.el,"is-modalContentScrolled",_.activeComponentHighlightsOverlay.scrollTop>0||_.overlayTextWrapper.scrollTop>0)},Q=w.c.extend({mixins:[{events:{"click .js-componentHighlightSlide":"animateComponentHighlight","click .js-overlayCloseButton":"closeActiveOverlay"},initialize(){_=this},onClose(){this.closeActiveOverlay()},closeActiveOverlay(){this.activeComponentHighlightsOverlay&&(this.activeComponentHighlightsOverlay.removeEventListener("scroll",K),this.overlayTextWrapper.removeEventListener("scroll",K),this.activeComponentHighlightsOverlay.classList.remove("is-active")),this.activeComponentHighlightsOverlay=null,this.overlayTextWrapper=null,this.el.classList.remove("is-modalContentScrolled"),this.el.classList.remove("productDetailComponentsModal--hasActiveOverlay")},animateComponentHighlight(e){var{delegateTarget:t}=e,{highlightSlideIndex:a}=t.dataset,i=t.closest(".js-componentHighlightsSection");if(a&&i){var r=i.querySelector(".js-componentHighlightsOverlay-"+a);r&&(r.classList.add("is-active"),this.activeComponentHighlightsOverlay=r,this.overlayTextWrapper=this.activeComponentHighlightsOverlay.querySelector(".js-overlayTextWrapper"),K(),this.activeComponentHighlightsOverlay.addEventListener("scroll",K),this.overlayTextWrapper.addEventListener("scroll",K),this.el.classList.add("productDetailComponentsModal--hasActiveOverlay"))}}}]}),Z=w.c.extend({mixins:[{onOpen(){Array.from(this.el.querySelectorAll("video:not(.hidden)")).forEach(e=>{e.preload="metadata"})},onClose(){this.el.querySelector("video").pause()}}]}),$={events:{"click .js-awardsMore":"awardsMore"},awardsMore(e){e.preventDefault();var{delegateTarget:t}=e,a=t.parentElement.nextElementSibling;t.classList.add("u-hide"),a.classList.remove("u-hide"),a.setAttribute("aria-hidden","false")}},Y=a(99),X=a(24),ee={events:{"click .js-setCheckbox":"setProductSelected","click .js-setAddToCart":"setAddToCart","change .js-setPdp .js-variation-attribute":"setVariationSelected","click .js-setPdp .js-productsummary .js-product-color:not(.colorSwatch--selected)":"setVariationSelected","click .js-setPdp .js-productsummary .js-productConfigurationOptionItem:not(.is-selected) button.js-productConfigurationSelect":"setVariationSelected"},initialize(){var e=this;(this.isProductSet=!!this.el.querySelector(".js-setPdp"),this.isProductSet)&&(g.Gb.take(g.mb,function(){var t=h()((function*(t){yield e.updateSetProduct(t),Object(X.b)(),e.setProductSelected()}));return function(e){return t.apply(this,arguments)}}()),this.el.querySelectorAll(".js-setProduct").forEach(e=>{this.setUpdateCheckboxDataset(e)}),this.setProductSelected())},getSetProductCheckboxes(e,t){var a=!0===e?":checked":"",i=!0===t?"":":not(.js-setCheckBox--unavailable)",r=this.el.querySelectorAll(".js-setProduct .js-setCheckbox"+i+a);return r&&r.length>0?Array.from(r):[]},getSetProductPids(e){return this.getSetProductCheckboxes(e).map(e=>e.dataset.pid)},setVariationSelected(e){var{delegateTarget:t}=e,a=t&&t.closest(".js-setProduct");a&&a.classList.add("js-setProduct--updating")},setUpdateSelectedItems(){var e=this.getSetProductCheckboxes(!0).length,t=this.el.querySelectorAll(".js-setSelectedItemsCount");t&&t.length>0&&null!=e&&t.forEach(t=>{t.innerHTML=e.toFixed(0)});var a=1===e,i=this.el.querySelectorAll(".js-setSelectedItems--single"),r=this.el.querySelectorAll(".js-setSelectedItems--multiple");i.forEach(e=>{Object(p.b)(e,"u-hide",!a)}),r.forEach(e=>{Object(p.b)(e,"u-hide",a)})},setProductSelected(){this.setUpdateSelectedItems(),this.updateSet()},setEnableCheckboxes(e){this.getSetProductCheckboxes().forEach(t=>{e?t.removeAttribute("disabled"):t.setAttribute("disabled","disabled");var a=t.closest(".inputCheckbox");a&&Object(p.b)(a,"inputCheckbox__label--disabled",!e)})},setUpdateCheckboxDataset(e){var t=e&&e.querySelector(".js-setProductSummary");if(t){var a=e.querySelector(".js-setCheckbox"),i=t.querySelector(".js-setProductData");if(a&&i){var r=i.dataset;a.dataset.pid=r.pid,a.dataset.disabled=r.disabled}}},setEnableAddToCartButton(e){var t=this.el.querySelectorAll(".js-setAddToCart");return!!(t&&t.length>0)&&(e?(t.forEach(e=>{e.classList.remove("button--disabled"),e.removeAttribute("disabled")}),!0):(t.forEach(e=>{e.setAttribute("disabled","disabled"),e.classList.add("button--disabled")}),!1))},setEnableAddToCart(){var e=this.getSetProductCheckboxes(!0),t=e.length>0,a=e.every(e=>e.dataset&&"true"!==e.dataset.disabled);return this.setEnableAddToCartButton(t&&a)},setAddToCart(){if(this.setEnableAddToCart()){var e=document.getElementById("js-pdp-header").dataset.productsetid,t=this.getSetProductCheckboxes(!0).map(e=>({pid:e.dataset.pid,qty:1,options:""}));g.Gb.send(g.e,{data:{pidsObj:JSON.stringify(t),productSetId:e}})}},updateSetProduct:Object(f.b)(function(){var e=h()((function*(e){var t=this.el.querySelector(".js-setProduct.js-setProduct--updating");if(e&&t){if(e.setProductCarousel){var a=t.querySelector(".js-setProductCarousel");a&&(a.outerHTML=e.setProductCarousel)}var i=t.querySelector(".js-setProductSummary");if(i){if(e.setProductSummary&&e.setProductSummary.remote&&e.setProductSummary.url){var r=yield fetch(e.setProductSummary.url,Object(m.d)()),s=r&&(yield r.text());s&&(i.innerHTML=s,Object(v.f)())}this.setUpdateCheckboxDataset(t)}Object(S.a)(t,null,".js-setProductEinsteinAnalytics"),t.classList.remove("js-setProduct--updating")}}));return function(t){return e.apply(this,arguments)}}()),updateSet:Object(f.b)(h()((function*(){var e={allPids:this.getSetProductPids().join("|"),pids:this.getSetProductPids(!0).join("|")},t=Object(m.a)(r.a.urlProductSetInfo,e),a=this.el.querySelectorAll(".js-setTotalPrice"),i=this.el.querySelectorAll(".js-setBasePrice");a.forEach(e=>{Object(p.b)(e,"is-loading",!0),e.innerHTML=""}),i.forEach(e=>{Object(p.b)(e,"is-loading",!0),e.innerHTML=""});var s=this.el.querySelectorAll(".js-setPriceLabel");s.forEach(e=>{Object(p.b)(e,"u-hide",!0)});var o=this.el.querySelectorAll(".js-setPriceDisclaimer");o.forEach(e=>{Object(p.b)(e,"u-hide",!0)}),this.setEnableCheckboxes(!1);var l=yield(yield fetch(t,Object(m.d)())).json(),{promotions:n,price:c}=l,d=c&&c.total&&c.total.formatted,u=c&&c.base&&c.base.formatted,h=c&&c.items;h&&this.getSetProductCheckboxes(!1).forEach(e=>{var t=e.closest(".js-setProduct"),a=t.querySelector(".js-pricetop-original"),i=t.querySelector(".js-pricetop-customized"),r=h[e.dataset.pid];r?(i.innerHTML=r,a.classList.add("u-hide"),i.classList.remove("u-hide")):(a.classList.remove("u-hide"),i.classList.add("u-hide"))}),n&&this.el.querySelectorAll(".js-setPromotions").forEach(e=>{e.innerHTML=n}),a.forEach(e=>{Object(p.b)(e,"is-loading",!1),d&&(e.innerHTML=d)}),i.forEach(e=>{Object(p.b)(e,"is-loading",!1),d&&u&&(e.innerHTML=u)}),d&&(s.forEach(e=>{Object(p.b)(e,"u-hide",!1)}),o.forEach(e=>{Object(p.b)(e,"u-hide",!1)})),this.setEnableCheckboxes(!0),this.setEnableAddToCart()})))},te=a(95),ae=w.c.extend({updateProductImagesToSelectedColorAndOpenModal(){var e=this;return h()((function*(){var t=document.querySelector("[data-selected-color-value]"),a=t?t.dataset.selectedColorValue:null;if(a){var i=e.el.querySelectorAll(".js-contentTabberBikes__content"),r=[];i.forEach(e=>{var t=e.querySelector(".js-bikeModelTabImageWrapper");if(t){var i=e.querySelector("[data-color-attribute-values]"),s=[];if(i)try{s=JSON.parse(i.dataset.colorAttributeValues)||[]}catch(d){}for(var o=0;o<s.length;o++){var l=s[o];if(l.id===a&&l.images&&l.images.modelSelectedModal&&l.images.modelSelectedModal.length){var n=l.images.modelSelectedModal,[c]=n;r.push(Object(te.b)(c,t,"js-bikeModelPicture"))}}}}),yield Promise.all(r).catch(()=>{})}}))()}}),ie=(a(82),{events:{"click .js-categoryDetailPageAttributeSelect:not(.is-selected)":"searchCategoryDetailPageAttribute","click .js-toggleModel":"toggleModel","click .js-bikeModelsSelectionGuideModal":"openModelSelectionModal"},initialize(){if(this.categoryDetailPage=this.el.querySelector(".js-isCategoryDetailPage"),this.categoryDetailPage){var{categoryDetailSelectedModelId:e}=this.categoryDetailPage.dataset,t={pid:e};Object(v.c)(this.el.querySelector(".js-colorPicker")),window.addEventListener("popstate",e=>{e&&e.state&&(Object(D.a)(!0),window.location.reload())});var a=this.updateCurrentLocationUrl(new URL(window.location.href),!0);a.searchParams.delete("cgid"),a.searchParams.delete("srule"),Object.keys(t).forEach(e=>{e&&t[e]?a.searchParams.set(e,t[e]):a.searchParams.delete(e)}),Object(b.d)({categoryUrl:window.location.href},a.toString())}this.initCategoryDetailPageModals(),g.Gb.take(g.mb,()=>{this.initCategoryDetailPageModals()})},initCategoryDetailPageModals(){var e=this.el.querySelector(".js-productDetailModelSelectionModal");e&&(this.modelSelectionModal=new ae({el:e}))},openModelSelectionModal:Object(f.b)(h()((function*(){this.modelSelectionModal&&(yield this.modelSelectionModal.updateProductImagesToSelectedColorAndOpenModal(),this.modelSelectionModal.isOpen||this.modelSelectionModal.open())}))),toggleModel:Object(f.b)(function(){var e=h()((function*(e){var{delegateTarget:t}=e,{actionUrl:a}=t.dataset,i=yield fetch(a,Object(m.d)()),r=yield i.text(),s=(new DOMParser).parseFromString(r,"text/html"),o=this.el.querySelector("#productDetailModalTriggerGridContainer"),l=s.querySelector("#productDetailModalTriggerGridContainer");o.innerHTML=l.innerHTML,Object(v.f)(),this.initUnboxingAndGeometryModals(),this.initProductDetailsComponentsModals()}));return function(t){return e.apply(this,arguments)}}(),{skipDelays:!0}),setSelectedState(e){var t=e.closest(".js-productConfigurationOptionsWrapper");(t?t.querySelectorAll(".js-categoryDetailPageAttributeSelect"):[]).forEach(e=>{e.classList.remove("is-selected")}),e.classList.add("is-selected")},getModelVersion(){return this.el.querySelector(".js-categoryDetailModel.is-selected").dataset.modelVersion},getSelectedMasterID(){var e,t,a;return null==(e=this.el.querySelector(".js-categoryDetailModel.is-selected"))||null==(t=e.closest(".js-isCategoryDetailPage"))||null==(a=t.dataset)?void 0:a.categoryDetailMasterId},searchCategoryDetailPageAttribute:Object(f.b)(function(){var e=h()((function*(e){var{delegateTarget:t}=e;this.setSelectedState(t);var a=new URL(window.location.href),{url:i}=t.dataset,{categoryAttributeLevel:r}=t.dataset,s=t.classList.contains("js-categoryDetailModel");if("0"!==r)for(var o=0;o<r;o++){var l=this.el.querySelector('[data-category-attribute-level="'+o+'"].is-selected'),n=new URL(l.dataset.url),c=n.searchParams.get("prefn1"),d=n.searchParams.get("prefv1");i=(i=i.replace("prefn1","prefn"+(parseInt(r,10)+1))).replace("prefv1","prefv"+(parseInt(r,10)+1)),(i=new URL(i)).searchParams.set("prefn"+parseInt(o+1,10),c),i.searchParams.set("prefv"+parseInt(o+1,10),d),i=i.toString()}var u=i,h={},y=this.el.querySelector("[data-selected-color-value]");if(y&&(h.preservedVariantColorValue=y.dataset.selectedColorValue),!s){var b=this.getModelVersion();b&&(h.version=b)}u=Object(m.a)(u,h);var f=a.searchParams.get("uuid");f&&(u=Object(m.a)(u,{uuid:f})),this.showCategoryInfo=!a.searchParams.get("pid")&&!s,u=Object(m.a)(u,{showCategoryInfo:this.showCategoryInfo});var j=yield fetch(Object(m.a)(u,{format:"detail"}),Object(m.d)()),S=yield j.text(),O=(new DOMParser).parseFromString(S,"text/html"),P=this.el.querySelector(".js-isCategoryDetailPage"),C=O.querySelector(".js-isCategoryDetailPage");P.innerHTML=C.innerHTML,P.dataset.productDetailData=C.dataset.productDetailData,P.dataset.preservedVariantColorValue=C.dataset.preservedVariantColorValue,P.dataset.selectedColor=C.dataset.selectedColor,P.dataset.categoryDetailMasterId=C.dataset.categoryDetailMasterId,P.dataset.categoryDetailSelectedModelId=C.dataset.categoryDetailSelectedModelId,P.dataset.currentProductGtmModel=C.dataset.currentProductGtmModel,window.customsfra.productDetail=JSON.parse(P.dataset.productDetailData),this.setProductDetailInitialData(),this.updateCountryLanguageSelectorModalData(O),this.initPDPModals(),this.initCategoryDetailPageModals(),this.updateProductStickyHeader(),Object(v.c)(this.el.querySelector(".js-colorPicker")),g.Gb.send(g.kb),this.initEinsteinRecommendation(),this.updateUrlState(t),v.d.update();var M=Object(p.d)(C,"currentProductGtmModel");g.Gb.send(g.l,{gtmModel:M})}));return function(t){return e.apply(this,arguments)}}(),{skipDelays:!0}),updateCountryLanguageSelectorModalData(e){var t=document.querySelector(".js-countrySelectorModal");t&&(t.dataset.modalOpenParam=e.querySelector(".js-countrySelectorModal").dataset.modalOpenParam)},updateCurrentLocationUrl(e,t){var a=e,i=Array.from(a.searchParams.keys());return a.searchParams.set(this.categoryDetailPage.dataset.preservedVariantColorValue,this.categoryDetailPage.dataset.selectedColor),i.forEach(e=>{-1===e.indexOf("rahmengroesse")||t||a.searchParams.delete(e)}),a},updateUrlState(e){var t=new URL(window.location.href);if((Array.from(t.searchParams.keys()).forEach(e=>{-1!==e.indexOf("rahmenfarbe")&&t.searchParams.delete(e)}),!this.showCategoryInfo)&&((t=this.updateCurrentLocationUrl(t)).searchParams.set("pid",this.categoryDetailPage.dataset.categoryDetailMasterId),Object(b.b)({categoryUrl:window.location.href},t.toString()),e.classList.contains("js-categoryDetailModel")))return;var a=new URL(e.dataset.url);a.searchParams.delete("srule");var i=a.searchParams.get("prefn1"),r=a.searchParams.get("prefv1"),s=!1;this.showCategoryInfo&&(t.searchParams.delete("pid"),a.searchParams.delete("pid"));var o=Array.from(t.searchParams.keys());if(o.length>0){for(var l=0;l<o.length;l++){var n=o[l];-1!==n.indexOf("prefn")&&t.searchParams.get(n)===i&&(t.searchParams.set("prefv"+n.replace("prefn",""),r),s=!0)}if(!s){var c=1;(o=Array.from(t.searchParams.keys())).forEach(e=>{-1!==e.indexOf("prefn")&&(c+=1)}),t.searchParams.set("prefn"+c,i),t.searchParams.set("prefv"+c,r)}var d=Array.from(t.searchParams.entries()),u=Array.from(this.el.querySelectorAll("button.js-categoryDetailPageAttributeSelect.is-selected")).map(e=>e.dataset.categoryAttributeValue).filter(e=>e);d.forEach(e=>{-1!==e[0].indexOf("prefv")&&-1===u.indexOf(e[1].toLowerCase().trim())&&(t.searchParams.delete(e[0]),t.searchParams.delete("prefn"+e[0].replace("prefv","")))}),t=this.updateCurrentLocationUrl(t),Object(b.b)({categoryUrl:window.location.href},t.toString())}else Object(b.b)({categoryUrl:window.location.href},a.toString())}}),re=a(39),se={events:{"click .js-cockpit-selectitem":"cockpitSelectItem","click .js-cockpit-skipsection":"cockpitSkipSection","click .js-cockpit-removebutton":"removeItem"},initialize(){var e=null,t=null;Object(re.a)(document.querySelector(".js-cockpitrecommendations-wrapper"),this.loadRecommendations.bind(this)),g.Gb.take(g.lb,e=>{if(e&&e.productData&&e.productData.selectedSizeVariationValue){var t=!(this.setCustomizationWrapper&&this.setCustomizationWrapper());this.loadRecommendations(t)}}),g.Gb.take(g.kb,()=>{this.loadRecommendations()}),g.Gb.take(g.a,a=>{var{result:i}=a;if("cockpitRecommendation"===i.addcontext||"upgradeRecommendation"===i.addcontext){i.skipAddToCartModal=!0;var r=this.el.querySelector('.js-cockpit-removebutton[data-pid="'+i.pid+'"]');i.pliUUID&&(r.dataset.uuid=i.pliUUID);var s=r.closest(".js-cockpit-removeitem");s.classList[i.error?"add":"remove"]("is-error"),s.querySelector(".js-cockpit-removeitem-message").innerHTML=i.message;var o=()=>{s.classList.add("is-visible"),t=s,e=setTimeout(()=>{s.classList.remove("is-visible")},5e3)};e?(clearTimeout(e),t.classList.remove("is-visible"),setTimeout(o,250)):o()}})},loadRecommendations(e){var t=this;return h()((function*(){var a=t.el.querySelector(".js-cockpitrecommendations-wrapper");if(a&&a.dataset&&a.dataset.url){var{url:i}=a.dataset,r=yield fetch(i,Object(m.d)()),s=yield r.text();if(a.innerHTML=s,Object(v.f)(),e)(new DOMParser).parseFromString(s,"text/html").querySelector(".js-cockpit-container")&&t.scrollToCockpitRecommendations(a)}}))()},scrollToCockpitRecommendations(e){var t=e||this.el.querySelector(".js-cockpitrecommendations-wrapper");t&&Object(j.b)(t,600)},cockpitSelectItem(e){var{target:t,delegateTarget:a}=e;if(!t.closest(".js-addToCart")){var i=!!t.closest("a"),r=a.classList.contains("is-selected");if(i){if(i&&r)return}else e.preventDefault();for(var s=this.el.querySelectorAll(".js-cockpit-selectitem"),o=0;o<s.length;o++)s[o].classList[s[o]===a?"toggle":"remove"]("is-selected")}},cockpitSkipSection(e){var{delegateTarget:t}=e;e.preventDefault();var a=t.closest(".js-cockpit-container");Object(j.b)(a.lastElementChild,350)},removeItem:Object(f.b)(function(){var e=h()((function*(e){var{delegateTarget:t}=e,a=yield fetch(Object(m.a)(r.a.urlRemoveFromCart,{pid:t.dataset.pid,uuid:t.dataset.uuid,stepone:!0}),Object(m.d)()),i=yield a.json();return t.closest(".js-cockpit-removeitem").classList.remove("is-visible"),g.Gb.send(g.i,{result:i,options:{}}),i}));return function(t){return e.apply(this,arguments)}}())},oe=".js-insurance-selectitem.is-selected",le={events:{"click .js-insurance-selectitem":"insuranceSelectItem"},initialize(){this.lastSelection="NO_INSURANCE",this.loadInsuranceOptions(),g.Gb.take(g.mb,()=>{this.updateTotalFromInsurance(),this.loadInsuranceOptions()}),g.Gb.take(g.jb,e=>{this.loadInsuranceOptions(e)}),g.Gb.take(g.kb,()=>{this.updateTotalFromInsurance(),this.loadInsuranceOptions()})},updateTotalFromInsurance(){var e=this.el.querySelector(oe),t="";e&&(t=e.dataset.plusprice),document.querySelectorAll(".js-insurance-total").forEach(e=>{e.innerHTML=t})},loadInsuranceOptions(e){var t=this;return h()((function*(){var a=t.el.querySelector(".js-insurance-wrapper");if(a){a.innerHTML="";var{url:i}=a.dataset,{fromcustomization:r}=a.dataset;if("true"!==r||e&&e.isLast&&e.hasOneAvailable){e&&(i+="&totalPrice="+e.totalPrice);var s=yield fetch(i,Object(m.d)()),o=yield s.text();a.innerHTML=o,Object(v.f)();var l=t.el.querySelector(oe);if(l)t.lastSelection=l.dataset.pid;else{var n=()=>t.el.querySelector('.js-insurance-selectitem[data-pid="'+t.lastSelection+'"]'),c=n();c||(t.lastSelection="NO_INSURANCE",c=n()),c&&c.classList.add("is-selected")}t.updateTotalFromInsurance()}}}))()},insuranceSelectItem(e){var{delegateTarget:t}=e;e.preventDefault();for(var a=this.el.querySelectorAll(".js-insurance-selectitem"),i=0;i<a.length;i++){var r=a[i]===t;a[i].classList[r?"add":"remove"]("is-selected"),r&&(this.lastSelection=a[i].dataset.pid)}this.updateTotalFromInsurance();var s=this.el.querySelector(".js-productActionsWrapper");s&&setTimeout(()=>{Object(j.b)(s,350)},1e3)}};var ne="js-customization-container",ce="js-customization-selectitem",de=!0,ue={events:{["click ."+ce+".is-selectable"]:"selectCustomizationItem"},setCustomizationWrapper(){return this.wrapper=this.el.querySelector(".js-customization-wrapper"),this.wrapper},initialize(){this.currentValues={},this.lastBuyingReasonsPrice=null,this.priceUpdateInProgress=!1,this.currentProcess=1,this.setCustomizationWrapper()&&(this.wrapper.dataset.preselectedvalues&&(this.currentValues=JSON.parse(this.wrapper.dataset.preselectedvalues)),this.startRecursive()),g.Gb.take(g.mb,()=>{this.setCustomizationWrapper()&&(this.lastBuyingReasonsPrice=null,this.wrapper.innerHTML="",this.updateTotalFromCustomization(),this.startRecursive(!0))}),g.Gb.take(g.kb,()=>{this.setCustomizationWrapper()&&(this.lastBuyingReasonsPrice=null,this.updateTotalFromCustomization(),this.startRecursive())})},updateTotalFromCustomization(){var e=this.el.querySelector(".js-price-hint")||{},t=this.el.querySelector(".js-customizationAvailabilityHeading"),a=this.el.querySelector(".js-customizationAvailabilityShippingInfo"),i=this.wrapper.querySelector(".js-customization-container:last-child"),r=this.el.querySelector(".js-pricetop-original")||{},s=this.el.querySelector(".js-pricetop-customized")||{},o=!1;if(i&&"true"===i.dataset.islastoption&&"true"===i.dataset.hasoneavailable){var l=i.querySelector(".js-customization-selectitem.is-selected");e.innerHTML=l.dataset.totalpricemessage||"",o=!!l.dataset.totalpricemessage,a&&(a.innerHTML=l.dataset.shippinginfo||"",t.classList.remove("u-hide")),r.classList.add("u-hide"),s.innerHTML=l.dataset.toppricemessage}else e.innerHTML="",a&&(a.innerHTML="",t.classList.add("u-hide")),r.classList.remove("u-hide"),s.innerHTML="";this.el.querySelectorAll(".js-addToCart-button").forEach(e=>{e.classList[o?"add":"remove"]("js-pdpAddToCart"),e.classList[o?"add":"remove"]("button--primary"),e.classList[o?"remove":"add"]("button--secondary"),e.classList[o?"remove":"add"]("button--disabled")});var n=this.el.querySelector(".js-addToCart-memberAccess");n&&!n.classList.contains("button--disabled")&&de&&(de=!1,g.Gb.send(g.pb))},updateOptionPrices(e){var t=e.querySelectorAll("."+ce),a=e.querySelector(".js-customization-selectitem.is-selected");if(a)for(var i=1===t.length,r=parseFloat(a.dataset.optionpricesales),s=(t,a,r)=>{var s=a<0?"- ":"+ ",o=r&&("true"!==e.dataset.showreducedview||i)?this.wrapper.getAttribute("data-includedprice"):s+(e=>{var t=document.querySelector(".js-moneyPatternDataContainer"),a=null==t?void 0:t.getAttribute("data-moneypattern"),i="true"===(null==t?void 0:t.getAttribute("data-removetrailingzeros"));if(!a)return"N/A";var r=e<0?"-":"",s=a.replace("m",r),o=Math.abs(e),l=Math.trunc(o),n=(s=function(e,t){for(var a=e.indexOf("f"),i=e.lastIndexOf("f")+1,r=e.substring(a,i),s=""+t,o=[],l=s.length-1,n=r.length-1;l>=0;n--){var c=r[n];n<0||"f"===c?(o.push(s[l]),l--):o.push(c)}return e.substring(0,a)+o.reverse().join("")+e.substring(i)}(s,l)).split("d"),c=n.length-1;if(c>0){for(var d=((o-l)*10**c).toFixed(0),u=10;d.length<c&&u-- >=0;)d+="0";var h=n[0],p=d,m=n[n.length-1];s=i&&0===Number(p)?(h=h.replace(/\D+$/g,""))+m:h+p+m}return s.trim()})(Math.abs(a));t.innerHTML=o},o=0;o<t.length;o++){var l=t[o];if(s(l.querySelector(".js-customization-option-price-sales"),parseFloat(l.dataset.optionpricesales)-r,l.classList.contains("is-selected")),l.dataset.optionpricelist)s(l.querySelector(".js-customization-option-price-list"),parseFloat(l.dataset.optionpricelist)-r)}},startRecursive(e){var t=this;return h()((function*(){var a=++t.currentProcess;t.max=20;var i=yield t.loadNextStepRecursive(a,e);if(t.lastBuyingReasonsPrice!==i||!0===t.priceUpdateInProgress){t.priceUpdateInProgress=!0;var r=t.el.querySelector(".js-productBuyingReasons"),s=r.getAttribute("data-buyingreasonsurl");i&&(s=Object(m.a)(s,{totalPrice:i}));var o=yield fetch(s,Object(m.d)()),l=yield o.text();r.innerHTML=l,t.lastBuyingReasonsPrice=i,t.initProductDetailsFinancingModals(),t.priceUpdateInProgress=!1}}))()},loadNextStepRecursive(e,t){var a=this;return h()((function*(){if(a.max--<=0)return null;var i,r=a.wrapper.querySelector(".js-customization-container:last-child"),s=!!r&&"true"===r.dataset.islastoption,o=!!r&&"true"===r.dataset.hasoneavailable,l=null;if(r&&(l=r.querySelector(".js-customization-selectitem.is-selected")),g.Gb.send(g.jb,{isLast:s,hasOneAvailable:o,totalPrice:s&&o?l.dataset.totalpricevalue:null,financingMessage:s&&o?l.dataset.financingMessage:null,stickyHeaderPriceMessage:s&&o?l.dataset.stickyHeaderPriceMessage:null}),s||r&&!o)return o?l.dataset.totalpricevalue:null;if(!(i=r?l.dataset.selectionurl:a.wrapper.dataset.url))return null;i+="&currentValues="+encodeURIComponent(JSON.stringify(a.currentValues));var n=yield fetch(i,Object(m.d)()),c=yield n.text();if(e!==a.currentProcess)return null;a.wrapper.innerHTML+=c,Object(v.f)();var d=document.querySelectorAll("."+ne);!0===t&&d.length>0&&"true"===d[d.length-1].dataset.islastoption&&Object(j.b)(a.wrapper,600),a.updateTotalFromCustomization();var u=a.wrapper.querySelector(".js-customization-container:last-child");return!u||r&&r.dataset.optionid===u.dataset.optionid?null:(a.updateOptionPrices(u),a.loadNextStepRecursive(e,t))}))()},selectCustomizationItem(e){var t=this;return h()((function*(){var{delegateTarget:a}=e;e.preventDefault();for(var i,r=a.classList.contains("is-selected"),s=a.closest("."+ne),o=s.parentNode,l=s.querySelectorAll("."+ce+".is-selectable"),n=0;n<l.length;n++){var c=l[n]===a;l[n].classList[c?"add":"remove"]("is-selected"),c&&(t.currentValues[s.dataset.optionid]=l[n].dataset.optionvalue)}if(t.updateOptionPrices(s),!s.nextElementSibling&&t.scrollToCockpitRecommendations?t.scrollToCockpitRecommendations():s.nextElementSibling&&(i=Array.from(s.parentNode.children).indexOf(s.nextElementSibling)),r)s.nextElementSibling&&Object(j.b)(s.nextElementSibling,500);else{for(var d=20;s.nextSibling&&d-- >=0;)s.nextSibling.remove();if(t.updateTotalFromCustomization(),yield t.startRecursive(),i>-1){var u=o.children.item(i);u&&Object(j.b)(u,500)}}}))()}},he={events:{},initialize(){var e=Object(w.d)("successorModal");e&&e.open()}},pe=a(249),me=a.n(pe),ye=a(45),ge=a(151),ve=a(55),be=a(150),fe=a(102),je=a(152),Se=a(13),Oe=["data"],Pe={"js-pdp-hero":"heroCarousel","js-productsummary":"productSummary","js-productBuyingReasons":"productBuyingReasons","js-productDetails":"productDetails","js-productDetailRecommendations":"recommendations","js-productDefects":"defects","js-productDefectsNewCondition":"defectsNewCondition","js-productNotes":"productDetailNotes","js-productDetailComponentsModal":"productDetailComponentsModalInclude","js-productDetailComponents":"productDetailComponentsCard","js-productDetailCompare":"productDetailCompareCard","js-productDetailHighlightsTopImages":"productDetailHighlightsTopImages"},Ce=s.a.extend({mixins:[$,Y.a,ee,ie,ue,se,le,he],events:{"click .js-callcenter-data-trigger":"loadCallCenterData","click .js-zoom-trigger":"openZoom","click .js-consors":"openConsors","click .js-productGeometryTrigger":"openGeometryModal","click .js-splitit":"openSplitit","click .js-sliceit":"openSliceit","click .js-paylater":"openPaylater","click .js-mobileDelivery":"openMobileDelivery","click .js-geometry-trigger":"setSelectedSizeGeometryModal","click .js-unboxing-trigger":"openUnboxing","change .js-variation-attribute":"selectVariation","click .js-productsummary .js-product-color:not(.colorSwatch--selected)":"selectVariation","click .js-productsummary .js-productConfigurationOptionItem:not(.is-selected) button.js-productConfigurationSelect":"selectVariation","click .js-pdpAddToCart":"addSelectionToCart","click .js-paypal":"openPayPalFinancingBuyingReason","click .js-cetelem":"openCetelemFinancingBuyingReason","click .js-affirm":"openAffirmFinancingBuyingReason","click .js-oney":"openOneyFinancingBuyingReason","submit #preFooter-askQuestion":"askQuestion","click .js-viewMoreProductHighlights":"showMoreProductHighlights","click .js-compareProductStickyHeaderPDP":"triggerCompareProduct"},initialize(){this.initPDPModals(),this.updateProductStickyHeader(),g.Gb.take(g.Z,()=>this.updateProductSummary()),g.Gb.take(g.jb,e=>{this.updateStickyHeaderPrice(!0,e.financingMessage,e.stickyHeaderPriceMessage)}),this.setProductDetailInitialData(),this.initFitAnalytics(),this.checkForRedirectAfterLoginAction(),Object(b.d)({selectProductUrl:this.initialProductDetailConfig.selectedVariantUrl},window.location.href),g.Gb.take(g.V,this.stateChanged.bind(this)),g.Gb.send(g.qb)},checkForRedirectAfterLoginAction(){if(new URL(window.location.href).hash.includes("membersonlyadd")){var e=this.el.querySelector(".js-addToCart-memberAccess");if(e){var t=()=>{window.history.pushState("",document.title,window.location.pathname+window.location.search),e.dispatchEvent(new Event("click",{bubbles:!0}))};e.classList.contains("button--disabled")?g.Gb.take(g.pb,()=>{t()}):t()}}},triggerCompareProduct(){var e=this.el.querySelector(".js-compareProductPDP");e&&e.click()},setProductDetailInitialData(){this.initialProductDetailConfig=Object(r.b)("productDetail"),this.productId=this.initialProductDetailConfig.id,this.editMode=this.initialProductDetailConfig.editMode,this.editPli=this.initialProductDetailConfig.editPli,this.selectedSizeVariationValue=this.initialProductDetailConfig.selectedSizeVariationValue},initPDPModals(){this.initProductDetailsFinancingModals(),this.mobileDeliveryModal=new B({el:this.el.querySelector(".js-mobileDelivery-modal")}),this.zoomModal=new w.c({el:this.el.querySelector(".js-pdp-zoom")}),this.initUnboxingAndGeometryModals(),this.initProductDetailsComponentsModals()},initUnboxingAndGeometryModals(){this.geometryModal=new J({el:this.el.querySelector(".js-geometry-modal")}),this.unboxingModal=new Z({el:this.el.querySelector(".js-unboxing-modal")})},openGeometryModal(){this.geometryModal.isOpen||this.geometryModal.open()},initProductDetailsComponentsModals(){new Q({el:this.el.querySelector(".js-componentsModal")})},initFitAnalytics(){var e=this.el.querySelector(".js-pdpContainer"),t=null;if(e&&void 0!==e.dataset.fitanalyticsdata)try{(t=JSON.parse(e.dataset.fitanalyticsdata)).operations={getAddToCartBtn:()=>e.querySelector(".js-pdpAddToCart"),getSizeChartLink:()=>e.querySelector(".js-pdpSizeGuideModalTrigger"),addToCart(t,a){var i=e.querySelector('.js-productConfigurationSelect.is-selected[data-product-size="'+a+'"]'),r=e.querySelector(".js-pdpAddToCart"),s=Object(w.d)("addToCart");if(s&&s.isOpen&&s.close(),null===i){var o=e.querySelector("#js-productsummary"),l=new MutationObserver(r=>{r.forEach(r=>{"childList"===r.type&&(null!==(i=e.querySelector('.js-productConfigurationSelect.is-selected[data-product-size="'+a+'"]'))&&this.addToCart(t,a),l.disconnect())})});l.observe(o,{childList:!0}),this.selectSize(t,a)}null!==i&&null!==r&&!1===r.disabled&&window.FitAnalyticsData.currentItemSubgroupId===t&&r.click()},selectSize(t,a){var i=e.querySelector('.js-productConfigurationSelect[data-product-size="'+a+'"]');null!==i&&window.FitAnalyticsData.currentItemSubgroupId===t&&i.click()},getCurrentSize(){var t=e.querySelector(".js-productConfigurationSelect.is-selected");return null!==t?t.dataset.productSize:null}}}catch(a){}null!==t&&(window.FitAnalyticsData=t)},updateFitAnalytics(e){var{fitAnalyticsData:t}=e.productData;if(t&&window.FitAnalyticsData){var{operations:a}=window.FitAnalyticsData;a&&(t.operations=a),window.FitAnalyticsData=t}},showMoreProductHighlights(e){var{delegateTarget:t}=e;t.classList.add("u-hide"),this.el.querySelectorAll(".js-viewMoreProductHighlightHidden").forEach(e=>{e.classList.remove("productDetailHighlights__componentsCard--hidden"),e.classList.add("productDetailHighlights__componentsCard--active")})},initProductDetailsFinancingModals(){var{el:e}=this;this.consorsModal=new z({el:e.querySelector(".js-consors-modal")}),this.splititModal=new R({el:e.querySelector(".js-splitit-modal")}),this.sliceitModal=new z({el:e.querySelector(".js-sliceit-modal")}),this.paylaterModal=new w.c({el:e.querySelector(".js-paylater-modal")})},openPayPalFinancingBuyingReason:Object(f.b)(function(){var e=h()((function*(e){var{delegateTarget:t}=e,a=new Promise(e=>{this.paypalBuyingReasonModal=new w.c({el:this.el.querySelector(".js-paypal-modal")}),t.classList.contains("js-buyingReasonInitialized")||this.paypalBuyingReasonModal.el.addEventListener("modal:open",()=>{this.initFinancingBuyingReasonsData(!1,["paypal"])}),this.listenForPaypalBuyingReasonWrapperDomChanges(this.paypalBuyingReasonModal.el,e),this.paypalBuyingReasonModal.open()});yield a,setTimeout(()=>{var e=this.paypalBuyingReasonModal.el.querySelector(".modal__mainContent");e&&(e.style.setProperty("opacity","1"),e.style.setProperty("padding-right","calc(2.8rem + (16px * 2))"),e.style.setProperty("padding-left","calc(2.8rem + (16px * 2))"),t.classList.add("js-buyingReasonInitialized"))},250)}));return function(t){return e.apply(this,arguments)}}()),openAffirmFinancingBuyingReason:Object(f.b)(function(){var e=h()((function*(e){var{delegateTarget:t}=e,a=new w.c({el:this.el.querySelector(".js-affirm-modal")});t.classList.contains("js-buyingReasonInitialized")||a.el.addEventListener("modal:open",()=>{this.initFinancingBuyingReasonsData(!0,["affirm"])}),a&&(t.classList.add("js-buyingReasonInitialized"),a.open())}));return function(t){return e.apply(this,arguments)}}()),openOneyFinancingBuyingReason:Object(f.b)(h()((function*(){var{el:e}=this,t=e.querySelector(".js-oney-modal");t&&!this.oneyBuyingReasonModal&&(this.oneyBuyingReasonModalView=new w.c({el:t}),"true"!==this.oneyBuyingReasonModalView.el.dataset.listenersAdded&&(this.oneyBuyingReasonModalView.el.dataset.listenersAdded="true",this.oneyBuyingReasonModalView.el.addEventListener("modal:open",()=>{var e=this.oneyBuyingReasonModalView.el.querySelector(".js-oney-modal-content");if(e){e.querySelector(".js-oney-pdp-show-more").addEventListener("click",()=>{A(e),this.oneyBuyingReasonModalView.close()},!1);var t=this;e.querySelectorAll(".js-oney-pdp-show-conditions").forEach(a=>{a.addEventListener("click",()=>{q(e,a.dataset.installments),t.oneyBuyingReasonModalView.close()},!1)})}}))),this.oneyBuyingReasonModalView&&!this.oneyBuyingReasonModalView.isOpen&&this.oneyBuyingReasonModalView.open()}))),updateProductSummary:Object(f.b)(h()((function*(){var{el:e}=this,t=e.querySelector("#js-productDetailBuyButton"),a=t?t.dataset.includeSummaryUrl:null;if(a){var i=yield fetch(a,Object(m.d)()),r=yield i.text(),s=this.el.querySelector("#js-productsummary");if(this.categoryDetailPage){var o=(new DOMParser).parseFromString(r,"text/html");s.querySelector(".js-cdpProductDetailSummaryBottom").innerHTML=o.querySelector(".js-cdpProductDetailSummaryBottom").innerHTML}else s.innerHTML=r;Object(v.f)(),g.Gb.send(g.Y),g.Gb.send(g.kb),this.updateProductStickyHeader()}}))),listenForPaypalBuyingReasonWrapperDomChanges(e,t){var a=new MutationObserver(i=>{this.isPaypalInitialized=!1;for(var r=0;r<=i.length&&!(i&&i[r]&&"type"in i[r]&&"childList"===i[r].type&&(i[r].addedNodes.forEach(i=>{i.nodeType===Node.ELEMENT_NODE&&(i.querySelector("iframe")&&(this.isPaypalInitialized=!0,this.listenForPaypalBuyingReasonRendered(e,t),a.disconnect()))}),this.isPaypalInitialized));r++);});a.observe(e,{attributes:!1,childList:!0,subtree:!0})},listenForPaypalBuyingReasonRendered(e,t){var a=e.querySelectorAll(".pp-message iframe")[0],i=new MutationObserver(()=>{i.disconnect(),a.style.setProperty("opacity",1,"important"),a.style.setProperty("pointer-events",null,"important"),t()});i.observe(a,{attributes:!0,attributeFilter:["style"]})},stateChanged(e){var{selectProductUrl:t}=e;t&&this.chooseVariation(t,!0)},loadCallCenterData:Object(f.b)(function(){var e=h()((function*(e){var{delegateTarget:t}=e,a=t.closest(".js-callcenter-data-wrapper").querySelector(".js-gear-data-list");if(a.classList.contains("u-hide")){if(""===a.innerHTML){var i=yield fetch(t.dataset.url,Object(m.d)()),r=yield i.json(),{variations:s}=r,{salesKmatId:o}=s&&s.length?s[0]:{};Object(p.s)(a,me()({variations:s,salesKmatId:o}),!0)}a.classList.remove("u-hide")}else a.classList.add("u-hide")}));return function(t){return e.apply(this,arguments)}}()),openZoom(e){var{delegateTarget:t}=e,{zoomUrl:a}=t.dataset;a&&!this.zoomModal.isOpen&&(this.zoomModal.setModalContent(""),this.zoomModal.open(a))},openConsors(){this.consorsModal.isOpen||this.consorsModal.open()},openCetelemFinancingBuyingReason:Object(f.b)(function(){var e=h()((function*(e){var t=this,{delegateTarget:a}=e,i=new w.c({el:this.el.querySelector(".js-cetelem-modal")});i&&!i.isOpen&&(a.classList.contains("js-buyingReasonInitialized")||(i.el.addEventListener("modal:open",h()((function*(){yield t.initFinancingBuyingReasonsData(!0,["cetelem"])}))),a.classList.add("js-buyingReasonInitialized")),i.open())}));return function(t){return e.apply(this,arguments)}}()),openSplitit(){this.splititModal.isOpen||this.splititModal.open()},openSliceit(){this.sliceitModal.isOpen||this.sliceitModal.open()},openPaylater(){this.paylaterModal.isOpen||this.paylaterModal.open()},openMobileDelivery(){this.mobileDeliveryModal.open()},selectVariation(e){var t,{delegateTarget:a}=e;if("SELECT"===a.nodeName?t=a.options[a.selectedIndex].value:({url:t}=a.dataset),t){var i,r=document.body.querySelector(".js-isCategoryDetailPage"),s=null==r||null==(i=r.dataset)?void 0:i.categoryDetailPageId;s&&(t=Object(m.a)(t,{cdpID:s})),this.chooseVariation(t,null,a)}},updateSections(e,t){var{categoryDetailPageAttributes:a,categoryDetailPageHasModelSelected:i,categoryDetailProductDescription:r}=t;return new Promise(t=>{Object(ye.a)(Object.entries(Pe)).pipe(Object(ve.a)(t=>{var[a,i]=t;return{el:this.el.querySelector("#"+a),data:e[i]}}),Object(be.a)(e=>{var{el:t}=e;return t}),Object(fe.b)(e=>{var{data:t}=e,r=d()(e,Oe),s=t&&"string"!=typeof t&&t.remote,o=s?t.url:null;return o&&a&&e.el.classList.contains("js-productsummary")&&(o=Object(m.a)(o,{isCategoryDetailPageProduct:!0,categoryDetailPageHasModelSelected:i,showCategoryInfo:!1})),s?Object(je.a)(o,Object(m.d)()).pipe(Object(fe.b)(function(){var e=h()((function*(e){return n()({},r,{data:yield e.text()})}));return function(t){return e.apply(this,arguments)}}())):Object(ge.a)(e)})).subscribe({next(e){var{el:t,data:s}=e;if(s&&a&&t.classList.contains("js-productsummary")){var o=(new DOMParser).parseFromString(s,"text/html"),l=o.querySelector(".js-categoryDetailPageAttributes"),n=o.querySelector(".js-mainInfoTextPanel");n&&!i&&(n.innerHTML=r),l.innerHTML=a.innerHTML,t.innerHTML=o.body.outerHTML}else s&&(t.innerHTML=s)},complete:()=>{this.updateProductStickyHeader(),t()}})})},updateModelsGridButtonsActions(e,t){var a=document.querySelector("#productDetailModalTriggerGridContainer"),i=null==a?void 0:a.querySelectorAll(".js-toggleModel");i.forEach(a=>{var i=function(a){var[i,r]=a.split("?"),s=r.split("&").reduce((a,i)=>{var[r,s]=i.split("=");return-1!==r.indexOf(e)?a[r]=t:a[r]=s,a},{});return Object(m.a)(i,s)}(a.dataset.actionUrl);a.dataset.actionUrl=i})},chooseVariation:Object(f.b)(function(){var e=h()((function*(e,t){var a,i,r,s,o=yield fetch(e,Object(m.d)()),l=yield o.json(),{selectedProductUrl:n,selectedSizeVariationValue:c,selectedColorVariationValue:d,id:u,colorParamStr:h,sizeParamStr:p}=l.productData;if(this.selectedSizeVariationValue=c,this.productId=u,this.editMode=l.editMode,this.editPli=l.editPli,this.categoryDetailPage){var y=a?null:this.el.querySelector(".js-mainInfoTextPanel");r=y?y.innerHTML:null,i=this.el.querySelector(".js-categoryDetailPageAttributes"),s=new URL(window.location.href),a=-1!==n.indexOf(h)||-1!==n.indexOf(p)||s.searchParams.get("pid"),this.updateModelsGridButtonsActions(l.productData.colorAttributeId,d)}if(yield this.updateSections(l,{categoryDetailPageAttributes:i,categoryDetailPageHasModelSelected:a,categoryDetailProductDescription:r}),this.el.querySelectorAll(["stickyNavigation__link","awards__specLink","productDescription__anchorLink"].map(e=>"."+e+".js-productCompareTrigger").join(",")).forEach(e=>{e.dataset.url=l.productData.compareUrl}),g.Gb.send(g.mb,l),g.Gb.send(g.gb),this.el.querySelector(".js-optionListDisclaimer")?setTimeout(()=>{g.Gb.send(g.lb,l)},1500):g.Gb.send(g.lb,l),this.isProductSet||Object(v.f)(),this.updateFitAnalytics(l),!this.isProductSet&&!t)if(this.categoryDetailPage){var f=this.el.querySelector(".js-addToCart-Container"),{categoryDetailPagePid:j}=f?f.dataset:null;j&&(-1!==n.indexOf(h)&&(s.searchParams.set(h,d),s.searchParams.set("pid",this.categoryDetailPage.dataset.categoryDetailMasterId)),-1!==n.indexOf(p)?(s.searchParams.set(p,c),s.searchParams.set("pid",this.categoryDetailPage.dataset.categoryDetailMasterId)):s.searchParams.delete(p),Object(b.b)({selectProductUrl:window.location.href},s.toString()))}else Object(b.b)({selectProductUrl:e},n);this.variationChosen()}));return function(t,a){return e.apply(this,arguments)}}()),variationChosen(){Object(j.d)(),this.initEinsteinRecommendation();var e=this.el.querySelector(Se.f);Object(Se.g)(e),Object(Se.k)(e),this.isProductSet||Object(X.b)(),this.initProductDetailsFinancingModals(),this.initProductDetailsComponentsModals()},initFinancingBuyingReasonsData(e,t){var a=this;return h()((function*(){if(-1!==t.indexOf("affirm")){var i=a.el.querySelector(".js-has-affirm-type");i&&(i.dataset.pageType="product",e&&window.affirm&&window.affirm.ui.refresh())}if(e&&-1!==t.indexOf("cetelem")){var r=a.el.querySelector(".cetelem-pdp");r&&(yield M(r,r.dataset),yield function(){return C.apply(this,arguments)}())}if(-1!==t.indexOf("paypal")){var s=a.el.querySelector(".pp-message");if(s){var o=function(){window.paypal.Messages({amount:s.dataset.paypalAmount,buyerCountry:s.dataset.paypalBuyercountry,currency:s.dataset.paypalCurrency,configuration:{placement:"product"},style:{layout:"text",color:"white",text:{color:"black",size:14},logo:{type:"none"}}}).render(".pp-message")};window.paypal&&window.paypal.Messages?o():Object(y.a)(s.dataset.paypalUrl,o)}}}))()},initEinsteinRecommendation(){Object(S.a)(this.el,"#js-productDetailRecommendations",".js-productDetailEinsteinAnalytics")},addSelectionToCart(e){var t=this;return h()((function*(){var a,{delegateTarget:i}=e,r=(a=document.querySelector(oe))&&"NO_INSURANCE"!==a.dataset.pid?a.dataset.pid:"",s=(()=>{var e=document.querySelectorAll("."+ne),t={},a=!1;return e.forEach(e=>{var i=e.querySelector(".js-customization-selectitem.is-selected");t[e.dataset.optionid]=i.dataset.optionvalue,a=!0}),a?JSON.stringify(t):null})(),o=!(!i||!i.dataset.redirectAfterLogin)&&i.dataset.redirectAfterLogin;t.editMode?g.Gb.send(g.k,{data:{pid:t.productId,quantity:1,uuid:t.editPli,selectedInsurance:r,selectedCustomizations:s,redirectAfterLogin:o}}):g.Gb.send(g.e,{data:{pid:t.productId,quantity:1,selectedInsurance:r,selectedCustomizations:s,redirectAfterLogin:o}})}))()},askQuestion(e){var{target:t}=e;e.preventDefault(),window.location.href=Object(m.a)(t.action,{q:t[0].value})},updateStickyHeaderPrice(e,t,a){var{el:i}=this,r=i.querySelector(".js-stickyPrice-original"),s=i.querySelector(".js-stickyPrice-customized");if(r){var o,l,n;if(s.innerHTML="",e){if(!a)return void r.classList.remove("u-hide");l=t,n=a,o=s,r.classList.add("u-hide")}else{var c=i.querySelector("[data-sticky-header-price-message]"),d=i.querySelector("[data-financing-message]");n=c?c.dataset.stickyHeaderPriceMessage:null,l=d?d.dataset.financingMessage:null,o=r,r.classList.remove("u-hide")}var u=n?"<span>"+n+"</span>":"";u+=l?"<span>"+l+"</span>":"",o.innerHTML=u}},updateProductStickyHeader(){var{el:e}=this,t=e.querySelector("#js-productDetailBuyButton"),a=e.querySelector("#js-productDetailBuyButtonSticky"),i=document.body.querySelector(".productDescription__productName"),r=document.body.querySelector(".stickyNavigation__heading"),s=null==r?void 0:r.innerText,o=null==i?void 0:i.innerText;if(t&&a){a.innerHTML=t.innerHTML;var l=a.querySelector(".js-productSelectAnchor");l&&l.addEventListener("click",j.f,!1)}this.isProductSet||(r&&o&&o!==s&&(r.innerText=o),this.updateStickyHeaderPrice())},setSelectedSizeGeometryModal(){this.geometryModal.setSelectedSizeVariation(this.selectedSizeVariationValue)},openUnboxing(){this.unboxingModal.isOpen||this.unboxingModal.open()}}),Me=a(250),we=a.n(Me),De=s.a.extend({initialize(){var{el:e}=this;e.querySelectorAll(".detailedGeometryPdf__title").forEach(e=>{e.innerHTML=e.innerHTML.replaceAll("ß","ss")}),this.svgObjectIsLoaded("detailedGeometryPdfImage",5e3).then(()=>{this.createHtml2pdf().then(e=>{if(Object(p.j)())window.location=e,Object(p.h)()&&setTimeout(()=>{window.close()},2e3);else{var t=e.replace("data:application/pdf;","data:application/pdf;geometry.pdf;");Object(p.a)(this.el,"u-hide");var a=document.createElement("iframe");a.type="application/pdf",a.src=t,a.style.width="100%",a.style.height="100%",a.style.position="absolute",document.body.appendChild(a),document.body.style.height="100%",document.documentElement.style.height="100%"}})}).catch(()=>{})},createHtml2pdf:Object(f.b)(h()((function*(){var e=document.getElementById("geomentryPdfContent"),{productname:t,categoryid:a,categoryurl:i}=e.dataset,{textPage:r}=e.dataset,s={margin:[10,8,24,8],filename:t+" Geometry.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,dpi:192,letterRendering:!0},jsPDF:{unit:"mm",format:"A4",orientation:"landscape"},pagebreak:{mode:"css",before:".page-break"}};return this.svgObjectToImage(),yield we()().from(e).set(s).toPdf().get("pdf").then(e=>{for(var o=e.internal.getNumberOfPages(),l=1;l<=o;l++)if(e.setPage(l),e.setTextColor(0),e.setFontSize(10),e.text(r+" "+l+" / "+o,e.internal.pageSize.getWidth()-28,e.internal.pageSize.getHeight()-10),a&&i){var n="https://www.canyon.com/country/lang/category/"+a;e.textWithLink(i,s.margin[3],e.internal.pageSize.getHeight()-10,{url:n})}e.setProperties({title:t+" Geometry.pdf"})}).outputPdf(Object(p.j)()?"bloburl":"datauristring")})),{skipDelays:!0}),svgObjectToImage(){var e=this.el.querySelector("#detailedGeometryPdfImage");if(e){var t=e.contentDocument.getElementsByTagName("svg")[0];t.setAttribute("width",e.offsetWidth),t.setAttribute("height",e.offsetHeight),t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:link","http://www.w3.org/1999/xlink");var a=window.btoa((new XMLSerializer).serializeToString(t)),i=document.createElement("img");i.src="data:image/svg+xml;base64,"+a,i.setAttribute("height",e.height),i.setAttribute("width",e.width),e.parentNode.replaceChild(i,e)}},svgObjectIsLoaded:(e,t)=>new Promise((a,i)=>{var r=document.getElementById(e);if(!r)return a();var s=!1,o=r.data;o&&r.addEventListener("load",()=>(!1!==s&&clearTimeout(s),a()),!1),r.data=o,t&&(s=setTimeout(()=>{i()},t))})}),qe=a(26),Ae=w.c.extend({mixins:[{events:{"submit form.js-notifyMe":"submitForm","change form.js-notifyMeSubmitted":"clearFormValidation"},onOpen(){var e=this.el.querySelector("form.js-notifyMe");if(e){var t=e.querySelector("div.successMessage"),a=e.querySelector("div.errorMessage"),i=e.querySelector("div.modalContent__submitWrapper"),r=e.querySelector("div.newsletter__inputWrapper");Object(p.a)(t,"u-visHidden"),Object(p.a)(a,"u-visHidden"),Object(p.p)(i,"u-visHidden"),Object(p.p)(r,"u-visHidden"),e.dataset&&e.dataset.batteryOptionUrl&&Object(f.b)(h()((function*(){var t=yield fetch(e.dataset.batteryOptionUrl),a=yield t.json();a&&null!==a.batteryOptionId&&(e.querySelector("#batteryOptionSku").value=a.batteryOptionId)})))()}}}],submitForm:Object(f.b)(function(){var e=h()((function*(e){e.preventDefault();var t=e.target,a=t.querySelector("div.successMessage"),i=t.querySelector("div.errorMessage");if((Object(p.a)(a,"u-visHidden"),Object(p.a)(i,"u-visHidden"),Object(L.j)(t,e),t.checkValidity())&&!this.el.querySelector("span.inputText__error")){var r=t.querySelector(".js-emailVerificationInlinePending");if(r){var{isEmailValid:s,isCatchAllEmail:o,errorMessageMarkup:l}=yield Object(L.e)(t,r,"notifyme");if((!s||o)&&l)return void Object(L.i)(t,r,l)}var n=yield fetch(t.action,Object(m.e)(new FormData(t)));if(n.redirected&&n.url)window.location.href=n.url;else{var c=yield n.json();if(c.csrfError&&c.redirectUrl)window.location.href=c.redirectUrl;else{if(Object(qe.a)(t,c),!0===c.success){var d=t.querySelector("div.newsletter__inputWrapper");Object(p.a)(d,"u-visHidden"),Object(p.p)(a,"u-visHidden");var u=this.el.querySelector(".js-notifyMeModalOpen");g.Gb.send(g.fb,u),Object(p.a)(t,"js-notifyMeSubmitted")}else Object(p.p)(i,"u-visHidden"),Object(L.j)(t,e);c.newsletterSuccess&&c.gtmModel&&g.Gb.send(g.eb,c)}}}}));return function(t){return e.apply(this,arguments)}}()),clearFormValidation(e){var t,{target:a}=e,i=a.closest("form");if(null!=i&&null!=(t=i.classList)&&t.contains("js-notifyMeSubmitted")){var r=i.querySelector("div.successMessage"),s=i.querySelector("div.errorMessage"),o=i.querySelector('[type="submit"]');Object(p.a)(r,"u-visHidden"),Object(p.a)(s,"u-visHidden"),Object(p.p)(i,"js-notifyMeSubmitted"),o.disabled=!1}}}),Le=a(19),ke=s.a.extend({events:{click:"addOrRemoveProduct"},initialize(){this.prepareUrlsAndHash(),this.checkIfProductOnWishlist(),g.Gb.take(g.Bb,()=>this.checkIfProductOnWishlist()),this.triggerHashAction(),this.unsubscribeUpdate=g.Gb.take(g.Fb,e=>{if(e.success&&e.action&&(e.pid===this.el.dataset.pid||e.masterpid===this.el.dataset.pid))e.action.indexOf("AddProduct")>0?(e.gtmEvents&&e.gtmEvents.length>0&&g.Gb.send(g.Cb,e),Object(p.b)(this.el,"has-addedToWishlist",!0)):e.action.indexOf("RemoveProduct")>0&&Object(p.b)(this.el,"has-addedToWishlist",!1);else if(e.action&&(e.pid===this.el.dataset.pid||e.masterpid===this.el.dataset.pid)&&(this.checkIfProductOnWishlist(),e.error&&e.msg)){var t=Object(w.d)("generalErrorModal");if(t){var a={additionalUrlParams:!0,errorMessage:e.msg};t.open(a)}}})},triggerHashAction(){if(this.hashAction){var e=document.querySelector(".js-productActionsWrapper");Object(j.b)(e||this.el,500,()=>{this.hashAction(),this.hashAction=!1})}},prepareUrlsAndHash(){new URL(window.location.href).hash.includes("addtowishlistfrompdp")&&(this.hashAction=this.addProduct,window.history.pushState("",document.title,window.location.pathname+window.location.search)),this.setWishlistUrls()},setWishlistUrls(){this.redirectAfterLogin=new URL(window.location.href+"#addtowishlistfrompdp"),this.redirectAfterLogin=this.redirectAfterLogin.toString(),this.addToWishlistUrl=Object(m.a)(r.a.urlAddToWishlist,{redirectAfterLogin:this.redirectAfterLogin}),this.removeFromWishlistUrl=Object(m.a)(r.a.urlRemoveFromWishlist,{pid:this.el.dataset.pid,redirectAfterLogin:this.redirectAfterLogin})},addOrRemoveProduct(){this.setWishlistUrls(),this.el.classList.contains("has-addedToWishlist")?this.removeProduct():this.addProduct()},addProduct(){this.fetchUpdate(this.addToWishlistUrl,Object(m.e)(Object(m.f)({pid:this.el.dataset.pid,addSourceDetailPage:document.querySelector(".js-isCategoryDetailPage")?r.a.sourceDetailPage.CATEGORY:r.a.sourceDetailPage.PRODUCT})))},removeProduct(){this.fetchUpdate(this.removeFromWishlistUrl)},fetchUpdate:Object(f.b)(function(){var e=h()((function*(e,t){var a=yield fetch(e,t);if(a.redirected&&a.url)window.location.href=a.url;else{var i=yield a.json();!1===i.loggedin?window.location.href=i.redirectUrl:g.Gb.send(g.Fb,i)}}));return function(t,a){return e.apply(this,arguments)}}()),checkIfProductOnWishlist:Object(f.b)(h()((function*(){if(this.el.dataset.pid){var e=yield fetch(Object(m.a)(r.a.urlWishlistCheck,{pid:this.el.dataset.pid}),Object(m.d)()),t=yield e.json();t.loggedIn&&Object(p.b)(this.el,"has-addedToWishlist",t.listed)}}))),remove(){this.unsubscribeUpdate()}}),Te=new WeakMap,Ie=()=>{Object(Le.a)("js-pdp-addtowishlist",(e,t)=>{if(t)Te.set(e,new ke({el:e}));else{var a=Te.get(e);a&&(a.remove(),Te.delete(e))}return!0},!0)},xe=a(93),ze=a(85),Ee=s.a.extend({mixins:[ze.a],events:{"click .js-ajaxSearchUrl":"performSearch"},performSearch(e){var t=this;return h()((function*(){var{delegateTarget:a}=e,{searchUrl:i}=a.dataset;yield Object(xe.a)(i,t.el)}))()},initialize(){var e,t=window.location.href,a=t.indexOf("height=")>-1&&t.indexOf("metric=")>-1,i=null==(e=document.querySelector(".js-productFilters"))?void 0:e.dataset.searchUrl;a&&i&&Object(b.c)({refinementUrl:i},i,!0),g.Gb.take(g.ob,e=>{var{refinementUrl:t,replace:a}=e;Object(b.c)({refinementUrl:t},t,a)})}});Object(i.a)({productListing:[Object(i.e)(Ee,".u-pageContainer"),Object(i.e)(o,".u-pageSectionInner.factoryTeams")],productDetail:[Object(i.b)(Ie),Object(i.e)(Ce,".u-pageContainer"),Object(i.e)(Ae,".js-notifyMeModal"),Object(i.e)(Ae,".js-similarBikesModal")],noResultsPage:[Object(i.e)(Ce,".u-pageContainer")],productPdf:[Object(i.e)(De,".js-geometryTablePdf")],productSetDetail:[Object(i.b)(Ie),Object(i.e)(Ce,".u-pageContainer"),Object(i.e)(Ae,".js-notifyMeModal"),Object(i.e)(Ae,".js-similarBikesModal")],categoryDetail:[Object(i.b)(Ie),Object(i.e)(Ce,".u-pageContainer"),Object(i.e)(Ae,".js-notifyMeModal"),Object(i.e)(Ae,".js-similarBikesModal")]},r.a.subPageType)}}]);